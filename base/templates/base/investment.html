 {% extends 'main.html' %}
 {% load static %}


    <title>investment plan </title>


    {% block content %}

  <style>
    body { font-family: Arial, sans-serif; margin: 2rem; }
    .box { border: 1px solid #e5e7eb; border-radius: 8px; padding: 1rem; margin-top: 1rem; }
    label { display: block; margin: .5rem 0 .25rem; }
    input, select { width: 300px; padding: .4rem; }
    button { margin-top: .75rem; padding: .5rem .75rem; background: #2563eb; color: white; border: none; border-radius: 6px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    table { width: 100%; border-collapse: collapse; margin-top: .5rem; }
    th, td { border: 1px solid #e5e7eb; padding: .5rem; text-align: left; }
    .muted { color: #64748b; }
  </style>
</head>
<body>
  <a href="{% url 'base:plans-list' %}">← Back to plans</a>
  
  <h1>{{ plan.title }}</h1>
  <p class="muted">{{ plan.description }}</p>

  <div class="row">
    <div class="box">
      <h3>Plan details</h3>
      <p>ROI: <strong>{{ plan.roi_percentage }}%</strong></p>
      <p>Duration: <strong>{{ plan.duration_years }} years</strong></p>
      <p>Minimum amount: <strong>{{ plan.minimum_amount }}</strong></p>
      <p>Risk: <strong>{{ plan.risk_level }}</strong></p>
      {% if plan.expected_long_term_growth %}
        <p>{{ plan.expected_long_term_growth }}</p>
      {% endif %}
    </div>

    <div class="box">
      <h3>Start investing</h3>
      <form method="post">
        {% csrf_token %}
        <label for="id_amount">Investment amount</label>
        {{ form.amount }}
        <label for="id_compounding">Compounding</label>
        {{ form.compounding }}
        <button type="submit">Calculate projection</button>
      </form>
    </div>
  </div>

  {% if result %}
    <div class="box">
      <h3>Projection</h3>
      <p>Principal: <strong>{{ result.principal }}</strong></p>
      <p>Final value: <strong>{{ result.final_value }}</strong></p>
      <p>Total gain: <strong>{{ result.total_gain }}</strong></p>
      <p class="muted">Compounding: {{ result.compounding }} · ROI: {{ result.roi_percent }}% · Years: {{ result.years }}</p>

      <h4>Yearly growth</h4>
      <table>
        <thead>
          <tr><th>Year</th><th>Projected value</th></tr>
        </thead>
        <tbody>
          {% for row in result.schedule %}
            <tr><td>{{ row.year }}</td><td>{{ row.value }}</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% endif %}
</body>
</html>

{% endblock %}